import{r as o,n as A,j as t,P as g,o as C,I as h}from"./index-Dam5Oft4.js";import{P as k}from"./PageHeader-CZTgCyCQ.js";import{D}from"./DataTable-CdlHlVvB.js";import{F as E}from"./FormModal-DAw8X4uI.js";import{c as N,p as M}from"./mockData-Cb9OjNPh.js";/* empty css                 */import{F as s}from"./index-BKD578Au.js";import{T as j}from"./index-B2mNOki0.js";import{C as O}from"./index-FCt6_Que.js";import{S as q}from"./Pagination-Uk28cVne.js";import{T as R}from"./index-CA2Oabsq.js";import{S as V}from"./index-ZWRJJm0q.js";import"./ReloadOutlined-DwAtovzj.js";import"./index-DuDzpR4g.js";import"./DeleteOutlined-B7Ves8ci.js";import"./Table-C6DyXLPW.js";import"./index-CrsKlaQM.js";import"./useForm-Boa0LRH0.js";import"./index-B4TLLAPK.js";const c=N(M),se=()=>{const[S,d]=o.useState([]),[x,f]=o.useState(!0),[v,i]=o.useState(!1),[l,y]=o.useState(null),[n]=s.useForm(),{showSuccess:m,showError:p}=A(),P=async()=>{f(!0);try{const e=await c.getAll();d(e.data)}catch{p("Failed to fetch programs")}finally{f(!1)}};o.useEffect(()=>{P()},[]);const I=o.useMemo(()=>[{title:"Program Name",dataIndex:"name",key:"name",sorter:(e,a)=>e.name.localeCompare(a.name),render:(e,a)=>t.jsxs("div",{children:[t.jsx("strong",{children:e}),t.jsx("div",{style:{fontSize:12,color:"var(--color-text-tertiary)"},children:a.description})]})},{title:"Code",dataIndex:"code",key:"code",width:100,render:e=>t.jsx(j,{color:"blue",children:e})},{title:"Type",dataIndex:"type",key:"type",width:120,filters:g.map(e=>({text:e.label,value:e.value})),onFilter:(e,a)=>a.type===e,render:e=>{const a=g.find(r=>r.value===e);return(a==null?void 0:a.label)||e}},{title:"Duration",dataIndex:"duration",key:"duration",width:100,sorter:(e,a)=>e.duration-a.duration,render:e=>`${e} years`},{title:"Status",dataIndex:"status",key:"status",width:100,filters:C.map(e=>({text:e.label,value:e.value})),onFilter:(e,a)=>a.status===e,render:e=>t.jsx(j,{color:e==="active"?"success":"default",children:e.charAt(0).toUpperCase()+e.slice(1)})}],[]),b=()=>{y(null),n.resetFields(),i(!0)},T=e=>{y(e),n.setFieldsValue(e),i(!0)},F=async e=>{try{await c.delete(e.id),d(a=>a.filter(r=>r.id!==e.id)),m("Program deleted successfully")}catch{p("Failed to delete program")}},w=async e=>{try{if(l){const a=await c.update(l.id,e);d(r=>r.map(u=>u.id===l.id?{...u,...a.data}:u)),m("Program updated successfully")}else{const a=await c.create(e);d(r=>[...r,a.data]),m("Program created successfully")}i(!1),n.resetFields()}catch{p("Failed to save program")}};return t.jsxs("div",{className:"crud-page",children:[t.jsx(k,{title:"Programs",subtitle:"Manage academic programs and degrees",onAdd:b,addText:"Add Program",onRefresh:P,loading:x}),t.jsx(O,{className:"content-card",children:t.jsx(D,{tableId:"programs",columns:I,dataSource:S,loading:x,searchKeys:["name","code","description"],onEdit:T,onDelete:F,emptyText:"No Programs Found",emptyDescription:"Start by adding your first academic program."})}),t.jsxs(E,{title:l?"Edit Program":"Add New Program",open:v,onClose:()=>i(!1),onSubmit:w,form:n,initialValues:l||{status:"active",duration:4,type:"ug"},children:[t.jsx(s.Item,{name:"name",label:"Program Name",rules:[{required:!0,message:"Please enter program name"}],children:t.jsx(h,{placeholder:"e.g., Bachelor of Technology"})}),t.jsx(s.Item,{name:"code",label:"Program Code",rules:[{required:!0,message:"Please enter program code"}],children:t.jsx(h,{placeholder:"e.g., B.Tech",style:{textTransform:"uppercase"}})}),t.jsx(s.Item,{name:"type",label:"Program Type",rules:[{required:!0,message:"Please select program type"}],children:t.jsx(q,{placeholder:"Select program type",options:g})}),t.jsx(s.Item,{name:"duration",label:"Duration (Years)",rules:[{required:!0,message:"Please enter duration"}],children:t.jsx(R,{min:1,max:10,style:{width:"100%"}})}),t.jsx(s.Item,{name:"description",label:"Description",children:t.jsx(h.TextArea,{rows:3,placeholder:"Brief description of the program"})}),t.jsx(s.Item,{name:"status",label:"Status",valuePropName:"checked",getValueFromEvent:e=>e?"active":"inactive",getValueProps:e=>({checked:e==="active"}),children:t.jsx(V,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})]})};export{se as default};
