import{r as i,q as b,j as t,n as p,I as D}from"./index-CV1bxkLI.js";import{P as C}from"./PageHeader-Dveo8Ckr.js";import{D as E}from"./DataTable-BML9nD9J.js";import{F as k}from"./FormModal-DDGPMrd0.js";import{c as A,l as N}from"./mockData-DhN2TBgL.js";/* empty css                 */import{F as l}from"./index-ChYIY3iE.js";import{C as T}from"./index-CJpspubW.js";import{T as q}from"./index-CMSFhQ_d.js";import{S as P}from"./index-BH29dwHH.js";import{S as M}from"./index-ChaAteEr.js";import"./ReloadOutlined-D_5bXhqo.js";import"./index-D8x57Z7c.js";import"./Table-CQO6drIt.js";import"./index-BHUsVD3h.js";import"./useForm-Dj05K5iH.js";const c=A(N),O={easy:"#10B981",medium:"#F59E0B",hard:"#EF4444"},ee=()=>{const[h,d]=i.useState([]),[v,y]=i.useState(!0),[j,n]=i.useState(!1),[s,x]=i.useState(null),[o]=l.useForm(),{showSuccess:m,showError:f}=b(),g=async()=>{y(!0);try{const e=await c.getAll();d(e.data)}catch{f("Failed to fetch difficulty levels")}finally{y(!1)}};i.useEffect(()=>{g()},[]);const I=i.useMemo(()=>[{title:"Level",dataIndex:"level",key:"level",width:80,sorter:(e,a)=>e.level-a.level,render:e=>t.jsxs(p,{children:["L",e]})},{title:"Name",dataIndex:"name",key:"name",sorter:(e,a)=>e.name.localeCompare(a.name),render:e=>{const a=O[e.toLowerCase()]||"default";return t.jsx(p,{color:a,children:e})}},{title:"Description",dataIndex:"description",key:"description"},{title:"Weightage",dataIndex:"weightage",key:"weightage",width:120,render:e=>`${e||0}%`},{title:"Status",dataIndex:"status",key:"status",width:100,render:e=>t.jsx(p,{color:e==="active"?"success":"default",children:(e==null?void 0:e.charAt(0).toUpperCase())+(e==null?void 0:e.slice(1))})}],[]),S=()=>{x(null),o.resetFields(),n(!0)},w=e=>{x(e),o.setFieldsValue(e),n(!0)},F=async e=>{try{await c.delete(e.id),d(a=>a.filter(r=>r.id!==e.id)),m("Difficulty level deleted")}catch{f("Failed to delete")}},L=async e=>{try{if(s){const a=await c.update(s.id,e);d(r=>r.map(u=>u.id===s.id?{...u,...a.data}:u)),m("Difficulty level updated")}else{const a=await c.create(e);d(r=>[...r,a.data]),m("Difficulty level created")}n(!1),o.resetFields()}catch{f("Failed to save")}};return t.jsxs("div",{className:"crud-page",children:[t.jsx(C,{title:"Difficulty Levels",subtitle:"Define question difficulty levels for balanced paper generation",onAdd:S,addText:"Add Level",onRefresh:g,loading:v}),t.jsx(T,{className:"content-card",children:t.jsx(E,{tableId:"difficulty-levels",columns:I,dataSource:h,loading:v,searchKeys:["name","description"],onEdit:w,onDelete:F,emptyText:"No Difficulty Levels Found",emptyDescription:"Define difficulty levels for question classification."})}),t.jsxs(k,{title:s?"Edit Difficulty Level":"Add Difficulty Level",open:j,onClose:()=>n(!1),onSubmit:L,form:o,initialValues:s||{status:"active",level:h.length+1,weightage:33},children:[t.jsx(l.Item,{name:"level",label:"Level Number",rules:[{required:!0,message:"Please enter level number"}],children:t.jsx(q,{min:1,max:5,style:{width:"100%"}})}),t.jsx(l.Item,{name:"name",label:"Level Name",rules:[{required:!0,message:"Please enter level name"}],children:t.jsx(D,{placeholder:"e.g., Easy, Medium, Hard"})}),t.jsx(l.Item,{name:"description",label:"Description",children:t.jsx(D.TextArea,{rows:2,placeholder:"Brief description of this difficulty level"})}),t.jsx(l.Item,{name:"weightage",label:"Default Weightage (%)",extra:"Suggested percentage of questions at this difficulty in generated papers",children:t.jsx(P,{min:0,max:100,marks:{0:"0%",50:"50%",100:"100%"}})}),t.jsx(l.Item,{name:"status",label:"Status",valuePropName:"checked",getValueFromEvent:e=>e?"active":"inactive",getValueProps:e=>({checked:e==="active"}),children:t.jsx(M,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})]})};export{ee as default};
