import{r as s,g as q,_ as O,q as B,j as t,D as g,n as _,w as z,h as v,C as i,I as p,t as V,x as Y}from"./index-CV1bxkLI.js";import{P as J}from"./PageHeader-Dveo8Ckr.js";import{D as K}from"./DataTable-BML9nD9J.js";import{F as L}from"./FormModal-DDGPMrd0.js";import{B as $,R as G}from"./BulkUpload-Brn-OanA.js";import{f as w,c as H}from"./mockData-DhN2TBgL.js";import{d as Q}from"./downloadHelper-BRzppvwq.js";/* empty css                 */import{F as l}from"./index-ChYIY3iE.js";import{C as W}from"./index-CJpspubW.js";import{D as X}from"./index-BVAu8cRu.js";import{S as Z}from"./index-ChaAteEr.js";import"./ReloadOutlined-D_5bXhqo.js";import"./index-D8x57Z7c.js";import"./Table-CQO6drIt.js";import"./index-BHUsVD3h.js";import"./useForm-Dj05K5iH.js";import"./DownloadOutlined-C8503EmU.js";import"./index-BV6MVHCX.js";import"./progress-BAB7NLHo.js";import"./index-DJSLK9Tr.js";import"./CalendarOutlined-Bu7k27zF.js";var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},te=function(n,o){return s.createElement(q,O({},n,{ref:o,icon:ee}))},ae=s.forwardRef(te);const h=H(w),we=()=>{const[D,n]=s.useState([]),[o,F]=s.useState(!0),[I,d]=s.useState(!1),[c,b]=s.useState(null),[k,A]=s.useState("list"),[m]=l.useForm(),{showSuccess:u,showError:x}=B(),S=async()=>{F(!0);try{const e=await h.getAll();n(e.data)}catch{x("Failed to fetch faculty")}finally{F(!1)}};s.useEffect(()=>{S()},[]);const C=s.useMemo(()=>[{title:"Name",dataIndex:"name",key:"name",sorter:(e,a)=>e.name.localeCompare(a.name),render:(e,a)=>t.jsxs("div",{children:[t.jsx("strong",{children:e}),t.jsx("div",{style:{fontSize:12,color:"var(--color-text-tertiary)"},children:a.email})]})},{title:"Department",dataIndex:"department",key:"department",width:180,filters:[...new Set(w.map(e=>e.department))].map(e=>({text:e,value:e})),onFilter:(e,a)=>a.department===e},{title:"Designation",dataIndex:"designation",key:"designation",width:160,render:e=>{const a=g.find(r=>r.value===e);return(a==null?void 0:a.label)||e},filters:g.map(e=>({text:e.label,value:e.value})),onFilter:(e,a)=>a.designation===e},{title:"Phone",dataIndex:"phone",key:"phone",width:130},{title:"Status",dataIndex:"status",key:"status",width:100,render:e=>t.jsx(_,{color:e==="active"?"success":"error",children:e.charAt(0).toUpperCase()+e.slice(1)})}],[]),P=()=>{b(null),m.resetFields(),d(!0)},E=e=>{b(e),m.setFieldsValue({...e,joinDate:e.joinDate?Y(e.joinDate):null}),d(!0)},T=async e=>{try{await h.delete(e.id),n(a=>a.filter(r=>r.id!==e.id)),u("Faculty deleted successfully")}catch{x("Failed to delete faculty")}},N=async e=>{var a;try{const r={...e,joinDate:(a=e.joinDate)==null?void 0:a.format("YYYY-MM-DD")};if(c){const f=await h.update(c.id,r);n(y=>y.map(j=>j.id===c.id?{...j,...f.data}:j)),u("Faculty updated successfully")}else{const f=await h.create(r);n(y=>[...y,f.data]),u("Faculty created successfully")}d(!1),m.resetFields()}catch{x("Failed to save faculty")}},M=async e=>new Promise(a=>{setTimeout(()=>{a({success:!0,message:"Faculty data imported successfully",data:{success:5,failed:0}})},2e3)}),U=()=>{Q("/templates/faculty_template.csv","faculty_template.csv"),u("Template download started")},R=[{key:"list",label:"Faculty List",icon:t.jsx(ae,{}),children:t.jsx(K,{tableId:"faculty",columns:C,dataSource:D,loading:o,searchKeys:["name","email","department"],onEdit:E,onDelete:T,emptyText:"No Faculty Found",emptyDescription:"Start by adding faculty members."})},{key:"upload",label:"Bulk Upload",icon:t.jsx(G,{}),children:t.jsx("div",{style:{padding:24},children:t.jsx($,{onUpload:M,onDownloadTemplate:U,templateName:"faculty_template.xlsx",title:"Upload Faculty Data",description:"Upload an Excel file containing faculty information",hint:"Required columns: Name, Email, Phone, Department, Designation"})})}];return t.jsxs("div",{className:"crud-page",children:[t.jsx(J,{title:"Faculty Management",subtitle:"Manage faculty members and their details",onAdd:P,addText:"Add Faculty",onRefresh:S,loading:o}),t.jsx(W,{className:"content-card",children:t.jsx(z,{activeKey:k,onChange:A,items:R,style:{marginTop:-16}})}),t.jsxs(L,{title:c?"Edit Faculty":"Add New Faculty",open:I,onClose:()=>d(!1),onSubmit:N,form:m,initialValues:c||{status:"active"},width:700,children:[t.jsxs(v,{gutter:16,children:[t.jsx(i,{span:12,children:t.jsx(l.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Please enter name"}],children:t.jsx(p,{placeholder:"e.g., Dr. John Smith"})})}),t.jsx(i,{span:12,children:t.jsx(l.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:t.jsx(p,{placeholder:"email@example.com"})})})]}),t.jsxs(v,{gutter:16,children:[t.jsx(i,{span:12,children:t.jsx(l.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,message:"Please enter phone"}],children:t.jsx(p,{placeholder:"10-digit phone number"})})}),t.jsx(i,{span:12,children:t.jsx(l.Item,{name:"department",label:"Department",rules:[{required:!0,message:"Please enter department"}],children:t.jsx(p,{placeholder:"e.g., Computer Science"})})})]}),t.jsxs(v,{gutter:16,children:[t.jsx(i,{span:12,children:t.jsx(l.Item,{name:"designation",label:"Designation",rules:[{required:!0,message:"Please select designation"}],children:t.jsx(V,{placeholder:"Select designation",options:g})})}),t.jsx(i,{span:12,children:t.jsx(l.Item,{name:"joinDate",label:"Join Date",children:t.jsx(X,{style:{width:"100%"}})})})]}),t.jsx(l.Item,{name:"status",label:"Status",valuePropName:"checked",getValueFromEvent:e=>e?"active":"inactive",getValueProps:e=>({checked:e==="active"}),children:t.jsx(Z,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})]})};export{we as default};
