import{r as m,g,_ as v,b0 as b,b1 as P}from"./index-CV1bxkLI.js";var w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"},y=function(a,t){return m.createElement(g,v({},a,{ref:t,icon:w}))},M=m.forwardRef(y);const f=b(P((r,a)=>({papers:[],addPaper:t=>{const n={...t,id:t.id||Date.now(),generatedAt:t.generatedAt||new Date().toISOString()};return r(c=>({papers:[n,...c.papers]})),n},deletePaper:t=>{r(n=>({papers:n.papers.filter(c=>c.id!==t)}))},getPaperById:t=>a().papers.find(n=>n.id===t),clearHistory:()=>{r({papers:[]})}}),{name:"question-paper-storage"})),O=async(r,a)=>{await new Promise(e=>setTimeout(e,2e3));const{totalMarks:t,difficultyDistribution:n={},bloomDistribution:c={},unitDistribution:u={}}=r,h=a.reduce((e,s)=>(e[s.marks]||(e[s.marks]=[]),e[s.marks].push(s),e),{});let d=[],o=0;const k=Object.keys(h).map(Number).sort((e,s)=>s-e),l=Object.keys(u).filter(e=>u[e]>0).map(Number);let i=a;l.length>0&&(i=i.filter(e=>l.includes(e.unitId))),i=[...i].sort(()=>Math.random()-.5);for(const e of k){const s=i.filter(p=>p.marks===e);for(const p of s)if(o+e<=t&&(d.push(p),o+=e),o===t)break;if(o===t)break}if(o<t)throw new Error(`Could not generate a paper with exactly ${t} marks with the current question bank. Total possible: ${o}`);return{id:Date.now(),questions:d.sort((e,s)=>e.marks-s.marks),totalMarks:o,config:r,generatedAt:new Date().toISOString(),status:"final"}},D=r=>f.getState().addPaper(r),I=r=>f.getState().deletePaper(r);export{M as R,I as d,O as g,D as s,f as u};
