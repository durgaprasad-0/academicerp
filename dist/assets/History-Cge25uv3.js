import{a2 as se,r,bn as ae,bF as K,W as w,at as ie,ai as re,ay as oe,al as O,aD as ce,aG as de,bo as me,aM as ue,q as pe,j as l,T as ge,n as R,U as be,S as q,B as P,b9 as he,G as xe,aY as V,bG as fe,h as je,C as L,aX as ye}from"./index-CV1bxkLI.js";import{P as ve}from"./PageHeader-Dveo8Ckr.js";import{d as X,b as Q,r as Oe}from"./mockData-DhN2TBgL.js";import{u as $e,R as we,d as Se}from"./QuestionPaper-C1yJK3X8.js";/* empty css                 */import{R as Ce}from"./CalendarOutlined-Bu7k27zF.js";import{R as U}from"./DownloadOutlined-C8503EmU.js";import{C as Y}from"./index-CJpspubW.js";import{F as Ie}from"./Table-CQO6drIt.js";import"./ReloadOutlined-D_5bXhqo.js";import"./index-BHUsVD3h.js";import"./useForm-Dj05K5iH.js";const Ee={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},F=se.createContext({});var Ne=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]]);return i};const Pe=e=>ae(e).map(t=>Object.assign(Object.assign({},t==null?void 0:t.props),{key:t.key}));function Me(e,t,i){const n=r.useMemo(()=>t||Pe(i),[t,i]);return r.useMemo(()=>n.map(p=>{var{span:d}=p,c=Ne(p,["span"]);return d==="filled"?Object.assign(Object.assign({},c),{filled:!0}):Object.assign(Object.assign({},c),{span:typeof d=="number"?d:K(e,d)})}),[n,e])}var Te=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]]);return i};function Re(e,t){let i=[],n=[],s=!1,p=0;return e.filter(d=>d).forEach(d=>{const{filled:c}=d,h=Te(d,["filled"]);if(c){n.push(h),i.push(n),n=[],p=0;return}const x=t-p;p+=d.span||1,p>=t?(p>t?(s=!0,n.push(Object.assign(Object.assign({},h),{span:x}))):n.push(h),i.push(n),n=[],p=0):n.push(h)}),n.length>0&&i.push(n),i=i.map(d=>{const c=d.reduce((h,x)=>h+(x.span||1),0);if(c<t){const h=d[d.length-1];return h.span=t-(c-(h.span||1)),d}return d}),[i,s]}const Be=(e,t)=>{const[i,n]=r.useMemo(()=>Re(t,e),[t,e]);return i},De=({children:e})=>e,D=e=>e!=null,G=e=>{const{itemPrefixCls:t,component:i,span:n,className:s,style:p,labelStyle:d,contentStyle:c,bordered:h,label:x,content:b,colon:C,type:y,styles:f}=e,v=i,{classNames:a}=r.useContext(F),S=Object.assign(Object.assign({},d),f==null?void 0:f.label),u=Object.assign(Object.assign({},c),f==null?void 0:f.content);return h?r.createElement(v,{colSpan:n,style:p,className:w(s,{[`${t}-item-${y}`]:y==="label"||y==="content",[a==null?void 0:a.label]:(a==null?void 0:a.label)&&y==="label",[a==null?void 0:a.content]:(a==null?void 0:a.content)&&y==="content"})},D(x)&&r.createElement("span",{style:S},x),D(b)&&r.createElement("span",{style:u},b)):r.createElement(v,{colSpan:n,style:p,className:w(`${t}-item`,s)},r.createElement("div",{className:`${t}-item-container`},D(x)&&r.createElement("span",{style:S,className:w(`${t}-item-label`,a==null?void 0:a.label,{[`${t}-item-no-colon`]:!C})},x),D(b)&&r.createElement("span",{style:u,className:w(`${t}-item-content`,a==null?void 0:a.content)},b)))};function _(e,{colon:t,prefixCls:i,bordered:n},{component:s,type:p,showLabel:d,showContent:c,labelStyle:h,contentStyle:x,styles:b}){return e.map(({label:C,children:y,prefixCls:f=i,className:v,style:a,labelStyle:S,contentStyle:u,span:N=1,key:o,styles:m},g)=>typeof s=="string"?r.createElement(G,{key:`${p}-${o||g}`,className:v,style:a,styles:{label:Object.assign(Object.assign(Object.assign(Object.assign({},h),b==null?void 0:b.label),S),m==null?void 0:m.label),content:Object.assign(Object.assign(Object.assign(Object.assign({},x),b==null?void 0:b.content),u),m==null?void 0:m.content)},span:N,colon:t,component:s,itemPrefixCls:f,bordered:n,label:d?C:null,content:c?y:null,type:p}):[r.createElement(G,{key:`label-${o||g}`,className:v,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},h),b==null?void 0:b.label),a),S),m==null?void 0:m.label),span:1,colon:t,component:s[0],itemPrefixCls:f,bordered:n,label:C,type:"label"}),r.createElement(G,{key:`content-${o||g}`,className:v,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},x),b==null?void 0:b.content),a),u),m==null?void 0:m.content),span:N*2-1,component:s[1],itemPrefixCls:f,bordered:n,content:y,type:"content"})])}const ze=e=>{const t=r.useContext(F),{prefixCls:i,vertical:n,row:s,index:p,bordered:d}=e;return n?r.createElement(r.Fragment,null,r.createElement("tr",{key:`label-${p}`,className:`${i}-row`},_(s,e,Object.assign({component:"th",type:"label",showLabel:!0},t))),r.createElement("tr",{key:`content-${p}`,className:`${i}-row`},_(s,e,Object.assign({component:"td",type:"content",showContent:!0},t)))):r.createElement("tr",{key:p,className:`${i}-row`},_(s,e,Object.assign({component:d?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},Ae=e=>{const{componentCls:t,labelBg:i}=e;return{[`&${t}-bordered`]:{[`> ${t}-view`]:{border:`${O(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto"},[`${t}-row`]:{borderBottom:`${O(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:first-child":{"> th:first-child, > td:first-child":{borderStartStartRadius:e.borderRadiusLG}},"&:last-child":{borderBottom:"none","> th:first-child, > td:first-child":{borderEndStartRadius:e.borderRadiusLG}},[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${O(e.padding)} ${O(e.paddingLG)}`,borderInlineEnd:`${O(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:i,"&::after":{display:"none"}}}},[`&${t}-middle`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${O(e.paddingSM)} ${O(e.paddingLG)}`}}},[`&${t}-small`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${O(e.paddingXS)} ${O(e.padding)}`}}}}}},Le=e=>{const{componentCls:t,extraColor:i,itemPaddingBottom:n,itemPaddingEnd:s,colonMarginRight:p,colonMarginLeft:d,titleMarginBottom:c}=e;return{[t]:Object.assign(Object.assign(Object.assign({},oe(e)),Ae(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:c},[`${t}-title`]:Object.assign(Object.assign({},ce),{flex:"auto",color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:i,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"}},[`${t}-row`]:{"> th, > td":{paddingBottom:n,paddingInlineEnd:s},"> th:last-child, > td:last-child":{paddingInlineEnd:0},"&:last-child":{borderBottom:"none","> th, > td":{paddingBottom:0}}},[`${t}-item-label`]:{color:e.labelColor,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${O(d)} ${O(p)}`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.contentColor,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline",minWidth:"1em"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},Ge=e=>({labelBg:e.colorFillAlter,labelColor:e.colorTextTertiary,titleColor:e.colorText,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,itemPaddingEnd:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,contentColor:e.colorText,extraColor:e.colorText}),_e=ie("Descriptions",e=>{const t=re(e,{});return Le(t)},Ge);var He=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]]);return i};const j=e=>{const{prefixCls:t,title:i,extra:n,column:s,colon:p=!0,bordered:d,layout:c,children:h,className:x,rootClassName:b,style:C,size:y,labelStyle:f,contentStyle:v,styles:a,items:S,classNames:u}=e,N=He(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","styles","items","classNames"]),{getPrefixCls:o,direction:m,className:g,style:M,classNames:I,styles:E}=de("descriptions"),$=o("descriptions",t),z=me(),J=r.useMemo(()=>{var T;return typeof s=="number"?s:(T=K(z,Object.assign(Object.assign({},Ee),s)))!==null&&T!==void 0?T:3},[z,s]),Z=Me(z,S,h),A=ue(y),k=Be(J,Z),[ee,te,ne]=_e($),le=r.useMemo(()=>({labelStyle:f,contentStyle:v,styles:{content:Object.assign(Object.assign({},E.content),a==null?void 0:a.content),label:Object.assign(Object.assign({},E.label),a==null?void 0:a.label)},classNames:{label:w(I.label,u==null?void 0:u.label),content:w(I.content,u==null?void 0:u.content)}}),[f,v,a,u,I,E]);return ee(r.createElement(F.Provider,{value:le},r.createElement("div",Object.assign({className:w($,g,I.root,u==null?void 0:u.root,{[`${$}-${A}`]:A&&A!=="default",[`${$}-bordered`]:!!d,[`${$}-rtl`]:m==="rtl"},x,b,te,ne),style:Object.assign(Object.assign(Object.assign(Object.assign({},M),E.root),a==null?void 0:a.root),C)},N),(i||n)&&r.createElement("div",{className:w(`${$}-header`,I.header,u==null?void 0:u.header),style:Object.assign(Object.assign({},E.header),a==null?void 0:a.header)},i&&r.createElement("div",{className:w(`${$}-title`,I.title,u==null?void 0:u.title),style:Object.assign(Object.assign({},E.title),a==null?void 0:a.title)},i),n&&r.createElement("div",{className:w(`${$}-extra`,I.extra,u==null?void 0:u.extra),style:Object.assign(Object.assign({},E.extra),a==null?void 0:a.extra)},n)),r.createElement("div",{className:`${$}-view`},r.createElement("table",null,r.createElement("tbody",null,k.map((T,W)=>r.createElement(ze,{key:W,index:W,colon:p,prefixCls:$,vertical:c==="vertical",bordered:d,row:T}))))))))};j.Item=De;const{Title:H,Text:B,Paragraph:et}=ge,tt=()=>{const{papers:e}=$e(),[t,i]=r.useState([]),[n,s]=r.useState(!0),[p,d]=r.useState(!1),[c,h]=r.useState(null),{showSuccess:x,showError:b}=pe();r.useEffect(()=>{s(!0),i(e),s(!1)},[e]);const C=r.useMemo(()=>[{title:"Course",key:"course",render:(o,m)=>{const g=X.find(M=>M.id===m.courseId);return l.jsxs("div",{children:[l.jsx(B,{strong:!0,children:(g==null?void 0:g.name)||"-"}),l.jsx("br",{}),l.jsx(B,{type:"secondary",style:{fontSize:12},children:g==null?void 0:g.code})]})}},{title:"Branch",key:"branch",width:100,render:(o,m)=>{const g=Q.find(M=>M.id===m.branchId);return l.jsx(R,{children:(g==null?void 0:g.code)||"-"})}},{title:"Exam Type",dataIndex:"examType",key:"examType",width:120,render:o=>l.jsx(R,{color:o==="end"?"blue":"green",children:o==="end"?"End Sem":o==="mid"?"Mid Sem":o})},{title:"Semester",dataIndex:"semester",key:"semester",width:100,render:o=>`Sem ${o}`},{title:"Marks",dataIndex:"totalMarks",key:"totalMarks",width:80,align:"center"},{title:"Questions",dataIndex:"questionCount",key:"questionCount",width:90,align:"center"},{title:"Status",dataIndex:"status",key:"status",width:100,render:o=>l.jsx(R,{color:o==="final"?"success":"warning",children:o.charAt(0).toUpperCase()+o.slice(1)})},{title:"Generated",dataIndex:"generatedAt",key:"generatedAt",width:140,render:o=>l.jsxs("div",{style:{fontSize:12},children:[l.jsx(Ce,{style:{marginRight:4}}),new Date(o).toLocaleDateString(),l.jsx("br",{}),l.jsx(be,{style:{marginRight:4}}),new Date(o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})},{title:"Actions",key:"actions",width:150,fixed:"right",render:(o,m)=>l.jsxs(q,{size:"small",children:[l.jsx(P,{type:"text",icon:l.jsx(he,{}),onClick:()=>y(m),title:"View"}),l.jsx(P,{type:"text",icon:l.jsx(U,{}),onClick:()=>f(),title:"Download"}),l.jsx(P,{type:"text",icon:l.jsx(we,{}),onClick:()=>v(),title:"Print"}),l.jsx(P,{type:"text",danger:!0,icon:l.jsx(xe,{}),onClick:()=>a(m),title:"Delete"})]})}],[]),y=o=>{h(o),d(!0)},f=o=>{x("PDF download started")},v=o=>{x("Opening print dialog..."),window.print()},a=o=>{V.confirm({title:"Delete Paper?",content:"Are you sure you want to delete this generated paper? This action cannot be undone.",okText:"Delete",okButtonProps:{danger:!0},onOk:()=>{Se(o.id),x("Paper deleted")}})},S=o=>{var m;return((m=X.find(g=>g.id===o))==null?void 0:m.name)||"-"},u=o=>{var m;return((m=Q.find(g=>g.id===o))==null?void 0:m.name)||"-"},N=o=>{var m;return((m=Oe.find(g=>g.id===o))==null?void 0:m.name)||"-"};return l.jsxs("div",{className:"crud-page",children:[l.jsx(ve,{title:"Generated Papers History",subtitle:"View and manage previously generated question papers",showAdd:!1,showRefresh:!1}),l.jsx(Y,{className:"content-card",children:l.jsx(Ie,{columns:C,dataSource:t,rowKey:"id",loading:n,scroll:{x:"max-content"},pagination:{showSizeChanger:!0,showTotal:o=>`Total ${o} papers`}})}),l.jsx(V,{title:l.jsxs(q,{children:[l.jsx(ye,{}),"Paper Details"]}),open:p,onCancel:()=>d(!1),footer:[l.jsx(P,{onClick:()=>d(!1),children:"Close"},"close"),l.jsx(P,{type:"primary",icon:l.jsx(U,{}),onClick:()=>f(),children:"Download PDF"},"download")],width:700,children:c&&l.jsxs(l.Fragment,{children:[l.jsxs(j,{bordered:!0,size:"small",column:2,children:[l.jsx(j.Item,{label:"Course",span:2,children:S(c.courseId)}),l.jsx(j.Item,{label:"Branch",children:u(c.branchId)}),l.jsx(j.Item,{label:"Regulation",children:N(c.regulationId)}),l.jsxs(j.Item,{label:"Semester",children:["Semester ",c.semester]}),l.jsx(j.Item,{label:"Academic Year",children:c.academicYear}),l.jsx(j.Item,{label:"Exam Type",children:l.jsx(R,{color:"blue",children:c.examType==="end"?"End Semester":"Mid Semester"})}),l.jsx(j.Item,{label:"Status",children:l.jsx(R,{color:c.status==="final"?"success":"warning",children:c.status})}),l.jsxs(j.Item,{label:"Total Marks",children:[c.totalMarks," marks"]}),l.jsxs(j.Item,{label:"Duration",children:[c.duration," minutes"]}),l.jsxs(j.Item,{label:"Questions",children:[c.questionCount," questions"]}),l.jsx(j.Item,{label:"Generated",children:fe(c.generatedAt)}),l.jsx(j.Item,{label:"Generated By",span:2,children:c.generatedBy})]}),l.jsx(Y,{size:"small",style:{marginTop:16},title:"Paper Statistics",children:l.jsxs(je,{gutter:16,children:[l.jsx(L,{span:8,children:l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(H,{level:3,style:{margin:0,color:"var(--color-primary)"},children:c.questionCount}),l.jsx(B,{type:"secondary",children:"Questions"})]})}),l.jsx(L,{span:8,children:l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(H,{level:3,style:{margin:0,color:"var(--color-accent)"},children:c.totalMarks}),l.jsx(B,{type:"secondary",children:"Total Marks"})]})}),l.jsx(L,{span:8,children:l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(H,{level:3,style:{margin:0,color:"var(--color-secondary)"},children:c.duration}),l.jsx(B,{type:"secondary",children:"Minutes"})]})})]})})]})})]})};export{tt as default};
