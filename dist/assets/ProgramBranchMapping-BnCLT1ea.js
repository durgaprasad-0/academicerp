import{r as i,q as R,j as e,y as I,B as L,h as N,C as h,L as c,T,n as x,E as b,z}from"./index-CV1bxkLI.js";import{P as A}from"./PageHeader-Dveo8Ckr.js";import{p as r,e as k,b as $}from"./mockData-DhN2TBgL.js";/* empty css                 */import{R as q}from"./SaveOutlined-B17u7eFs.js";import{C as f}from"./index-CJpspubW.js";import{C as F}from"./index-BHUsVD3h.js";import"./ReloadOutlined-D_5bXhqo.js";const{Text:l}=T,U=()=>{var g;const[u,j]=i.useState(!0),[y,o]=i.useState(!1),[a,d]=i.useState(null),[m,p]=i.useState({}),{showSuccess:S,showError:C}=R();i.useEffect(()=>{const s={};r.forEach(n=>{s[n.id]=k.filter(t=>t.programId===n.id).map(t=>t.branchId)}),p(s),j(!1),r.length>0&&d(r[0].id)},[]);const P=s=>{d(s)},v=s=>{a&&p(n=>{const t=n[a]||[],w=t.includes(s);return{...n,[a]:w?t.filter(E=>E!==s):[...t,s]}})},B=async()=>{o(!0);try{await new Promise(s=>setTimeout(s,1e3)),S("Mappings saved successfully")}catch{C("Failed to save mappings")}finally{o(!1)}},M=a?m[a]||[]:[];return u?e.jsx("div",{className:"crud-page",style:{textAlign:"center",padding:100},children:e.jsx(I,{size:"large"})}):e.jsxs("div",{className:"crud-page",children:[e.jsx(A,{title:"Program-Branch Mapping",subtitle:"Assign branches to academic programs",showAdd:!1,showRefresh:!1,extra:e.jsx(L,{type:"primary",icon:e.jsx(q,{}),onClick:B,loading:y,children:"Save Mappings"})}),e.jsxs(N,{gutter:24,children:[e.jsx(h,{xs:24,md:10,children:e.jsx(f,{title:"Programs",className:"mapping-panel",size:"small",children:e.jsx(c,{dataSource:r,renderItem:s=>e.jsxs(c.Item,{className:`mapping-item ${a===s.id?"selected":""}`,onClick:()=>P(s.id),children:[e.jsxs("div",{children:[e.jsx(l,{strong:!0,children:s.name}),e.jsx("br",{}),e.jsx(l,{type:"secondary",style:{fontSize:12},children:s.code})]}),e.jsxs(x,{color:"blue",children:[(m[s.id]||[]).length," branches"]})]})})})}),e.jsx(h,{xs:24,md:14,children:e.jsx(f,{title:e.jsxs("span",{children:[e.jsx(z,{style:{marginRight:8}}),"Assign Branches",a&&e.jsxs(l,{type:"secondary",style:{fontWeight:"normal",marginLeft:8},children:["to ",(g=r.find(s=>s.id===a))==null?void 0:g.name]})]}),className:"assignment-panel",size:"small",children:a?e.jsx(c,{dataSource:$,renderItem:s=>e.jsx(c.Item,{className:"assignment-item",children:e.jsx(F,{checked:M.includes(s.id),onChange:()=>v(s.id),children:e.jsxs("span",{style:{marginLeft:8},children:[s.name,e.jsx(x,{style:{marginLeft:8},children:s.code})]})})})}):e.jsx(b,{description:"Select a program to assign branches"})})})]})]})};export{U as default};
