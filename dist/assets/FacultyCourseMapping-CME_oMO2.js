import{r as n,n as T,j as e,ax as $,S as Y,aA as B,aB as q,d as L,B as S,az as N,aC as _}from"./index-Dam5Oft4.js";import{P as D}from"./PageHeader-CZTgCyCQ.js";import{F as O}from"./FormModal-DAw8X4uI.js";import{h as H,f as p,d as b,b as C}from"./mockData-Cb9OjNPh.js";/* empty css                 */import{F as l}from"./index-BKD578Au.js";import{R as h,a as i,C as I,T as K,c as W}from"./index-FCt6_Que.js";import{L as A}from"./index-DLj7NG8w.js";import{T as F}from"./index-B2mNOki0.js";import{F as G}from"./Table-C6DyXLPW.js";import{E as J,S as o}from"./Pagination-Uk28cVne.js";import{P as Q}from"./index-DuDzpR4g.js";import{R as U}from"./DeleteOutlined-B7Ves8ci.js";import"./ReloadOutlined-DwAtovzj.js";import"./index-B4TLLAPK.js";import"./useForm-Boa0LRH0.js";import"./index-CrsKlaQM.js";const{Text:c}=K,xe=()=>{var y;const[w,v]=n.useState(!0),[a,x]=n.useState(null),[f,d]=n.useState([]),[M,m]=n.useState(!1),[j]=l.useForm(),{showSuccess:g,showError:V}=T();n.useEffect(()=>{d(H),v(!1);const s=p.filter(t=>t.status==="active");s.length>0&&x(s[0].id)},[]);const E=p.filter(s=>s.status==="active"),R=f.filter(s=>s.facultyId===a),z=[{title:"Course",key:"course",render:(s,t)=>{const r=b.find(u=>u.id===t.courseId);return r?e.jsxs("div",{children:[e.jsx(c,{strong:!0,children:r.name}),e.jsx("br",{}),e.jsx(c,{type:"secondary",style:{fontSize:12},children:r.code})]}):"-"}},{title:"Branch",key:"branch",width:120,render:(s,t)=>{const r=C.find(u=>u.id===t.branchId);return r?e.jsx(F,{children:r.code}):"-"}},{title:"Semester",dataIndex:"semester",key:"semester",width:100,render:s=>`Sem ${s}`},{title:"Academic Year",dataIndex:"academicYear",key:"academicYear",width:120},{title:"Action",key:"action",width:80,render:(s,t)=>e.jsx(Q,{title:"Remove this assignment?",onConfirm:()=>P(t.id),children:e.jsx(S,{type:"text",danger:!0,icon:e.jsx(U,{}),size:"small"})})}],P=s=>{d(t=>t.filter(r=>r.id!==s)),g("Assignment removed")},k=async s=>{const t={id:Date.now(),facultyId:a,...s};d(r=>[...r,t]),m(!1),j.resetFields(),g("Course assigned successfully")};return w?e.jsx("div",{className:"crud-page",style:{textAlign:"center",padding:100},children:e.jsx($,{size:"large"})}):e.jsxs("div",{className:"crud-page",children:[e.jsx(D,{title:"Faculty-Course Mapping",subtitle:"Assign courses to faculty members for academic sessions",showAdd:!1,showRefresh:!1}),e.jsxs(h,{gutter:24,children:[e.jsx(i,{xs:24,md:8,children:e.jsx(I,{title:"Faculty",size:"small",children:e.jsx(A,{dataSource:E,renderItem:s=>e.jsxs(A.Item,{className:`mapping-item ${a===s.id?"selected":""}`,onClick:()=>x(s.id),children:[e.jsxs(Y,{children:[e.jsx(B,{size:36,style:{backgroundColor:L.primary},children:q(s.name)}),e.jsxs("div",{children:[e.jsx(c,{strong:!0,children:s.name}),e.jsx("br",{}),e.jsx(c,{type:"secondary",style:{fontSize:12},children:s.department})]})]}),e.jsxs(F,{color:"purple",children:[f.filter(t=>t.facultyId===s.id).length," courses"]})]})})})}),e.jsx(i,{xs:24,md:16,children:e.jsx(I,{title:e.jsxs("span",{children:["Assigned Courses",a&&e.jsxs(c,{type:"secondary",style:{fontWeight:"normal",marginLeft:8},children:["for ",(y=p.find(s=>s.id===a))==null?void 0:y.name]})]}),extra:e.jsx(S,{type:"primary",icon:e.jsx(W,{}),onClick:()=>m(!0),disabled:!a,children:"Assign Course"}),size:"small",children:a?e.jsx(G,{dataSource:R,columns:z,rowKey:"id",pagination:!1,size:"small",locale:{emptyText:"No courses assigned to this faculty"}}):e.jsx(J,{description:"Select a faculty member to view assignments"})})})]}),e.jsxs(O,{title:"Assign Course to Faculty",open:M,onClose:()=>m(!1),onSubmit:k,form:j,width:600,children:[e.jsxs(h,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(l.Item,{name:"courseId",label:"Course",rules:[{required:!0,message:"Please select a course"}],children:e.jsx(o,{placeholder:"Select course",options:b.map(s=>({value:s.id,label:`${s.name} (${s.code})`})),showSearch:!0,optionFilterProp:"label"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{name:"branchId",label:"Branch",rules:[{required:!0,message:"Please select branch"}],children:e.jsx(o,{placeholder:"Select branch",options:C.map(s=>({value:s.id,label:`${s.name} (${s.code})`}))})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(l.Item,{name:"semester",label:"Semester",rules:[{required:!0,message:"Please select semester"}],children:e.jsx(o,{placeholder:"Select semester",options:N})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{name:"academicYear",label:"Academic Year",rules:[{required:!0,message:"Please select year"}],children:e.jsx(o,{placeholder:"Select academic year",options:_})})})]})]})]})};export{xe as default};
