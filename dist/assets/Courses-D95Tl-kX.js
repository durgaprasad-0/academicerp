import{r,n as k,j as t,C as h,I as S}from"./index-Dam5Oft4.js";import{P}from"./PageHeader-CZTgCyCQ.js";import{D as A}from"./DataTable-CdlHlVvB.js";import{F as D}from"./FormModal-DAw8X4uI.js";import{c as N,d as M}from"./mockData-Cb9OjNPh.js";/* empty css                 */import{F as o}from"./index-BKD578Au.js";import{T as x}from"./index-B2mNOki0.js";import{C as R,R as q,a as g}from"./index-FCt6_Que.js";import{T as V}from"./index-CA2Oabsq.js";import{S as O}from"./Pagination-Uk28cVne.js";import{S as U}from"./index-ZWRJJm0q.js";import"./ReloadOutlined-DwAtovzj.js";import"./index-DuDzpR4g.js";import"./DeleteOutlined-B7Ves8ci.js";import"./Table-C6DyXLPW.js";import"./index-CrsKlaQM.js";import"./useForm-Boa0LRH0.js";import"./index-B4TLLAPK.js";const n=N(M),oe=()=>{const[b,c]=r.useState([]),[f,y]=r.useState(!0),[I,l]=r.useState(!1),[d,C]=r.useState(null),[i]=o.useForm(),{showSuccess:u,showError:m}=k(),j=async()=>{y(!0);try{const e=await n.getAll();c(e.data)}catch{m("Failed to fetch courses")}finally{y(!1)}};r.useEffect(()=>{j()},[]);const w=r.useMemo(()=>[{title:"Course Name",dataIndex:"name",key:"name",sorter:(e,s)=>e.name.localeCompare(s.name)},{title:"Code",dataIndex:"code",key:"code",width:100,render:e=>t.jsx(x,{color:"blue",children:e})},{title:"Credits",dataIndex:"credits",key:"credits",width:80,sorter:(e,s)=>e.credits-s.credits,align:"center"},{title:"Type",dataIndex:"type",key:"type",width:150,filters:h.map(e=>({text:e.label,value:e.value})),onFilter:(e,s)=>s.type===e,render:e=>{const s=h.find(a=>a.value===e);return t.jsx(x,{children:(s==null?void 0:s.label)||e})}},{title:"Status",dataIndex:"status",key:"status",width:100,render:e=>t.jsx(x,{color:e==="active"?"success":"default",children:e.charAt(0).toUpperCase()+e.slice(1)})}],[]),v=()=>{C(null),i.resetFields(),l(!0)},F=e=>{C(e),i.setFieldsValue(e),l(!0)},E=async e=>{try{await n.delete(e.id),c(s=>s.filter(a=>a.id!==e.id)),u("Course deleted successfully")}catch{m("Failed to delete course")}},T=async e=>{try{if(d){const s=await n.update(d.id,e);c(a=>a.map(p=>p.id===d.id?{...p,...s.data}:p)),u("Course updated successfully")}else{const s=await n.create(e);c(a=>[...a,s.data]),u("Course created successfully")}l(!1),i.resetFields()}catch{m("Failed to save course")}};return t.jsxs("div",{className:"crud-page",children:[t.jsx(P,{title:"Course Master",subtitle:"Manage courses and subjects",onAdd:v,addText:"Add Course",onRefresh:j,loading:f}),t.jsx(R,{className:"content-card",children:t.jsx(A,{tableId:"courses",columns:w,dataSource:b,loading:f,searchKeys:["name","code"],onEdit:F,onDelete:E,emptyText:"No Courses Found",emptyDescription:"Start by adding your first course."})}),t.jsxs(D,{title:d?"Edit Course":"Add New Course",open:I,onClose:()=>l(!1),onSubmit:T,form:i,initialValues:d||{status:"active",credits:3,type:"theory"},width:600,children:[t.jsx(o.Item,{name:"name",label:"Course Name",rules:[{required:!0,message:"Please enter course name"}],children:t.jsx(S,{placeholder:"e.g., Data Structures"})}),t.jsxs(q,{gutter:16,children:[t.jsx(g,{span:12,children:t.jsx(o.Item,{name:"code",label:"Course Code",rules:[{required:!0,message:"Please enter course code"}],children:t.jsx(S,{placeholder:"e.g., CS201",style:{textTransform:"uppercase"}})})}),t.jsx(g,{span:12,children:t.jsx(o.Item,{name:"credits",label:"Credits",rules:[{required:!0,message:"Please enter credits"}],children:t.jsx(V,{min:1,max:10,style:{width:"100%"}})})})]}),t.jsx(o.Item,{name:"type",label:"Course Type",rules:[{required:!0,message:"Please select course type"}],children:t.jsx(O,{placeholder:"Select course type",options:h})}),t.jsx(o.Item,{name:"status",label:"Status",valuePropName:"checked",getValueFromEvent:e=>e?"active":"inactive",getValueProps:e=>({checked:e==="active"}),children:t.jsx(U,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})]})};export{oe as default};
