import{r as n,q as T,j as e,y as $,h as p,C as i,L as S,S as Y,H as q,J as B,d as L,T as N,n as b,E as _,B as C,A as D,t as o,F as H,K,G as O}from"./index-CV1bxkLI.js";import{P as G}from"./PageHeader-Dveo8Ckr.js";import{F as J}from"./FormModal-DDGPMrd0.js";import{h as W,f as h,d as I,b as F}from"./mockData-DhN2TBgL.js";/* empty css                 */import{F as l}from"./index-ChYIY3iE.js";import{C as A}from"./index-CJpspubW.js";import{F as Q}from"./Table-CQO6drIt.js";import{P as U}from"./index-D8x57Z7c.js";import"./ReloadOutlined-D_5bXhqo.js";import"./useForm-Dj05K5iH.js";import"./index-BHUsVD3h.js";const{Text:c}=N,de=()=>{var g;const[w,v]=n.useState(!0),[r,x]=n.useState(null),[j,d]=n.useState([]),[M,m]=n.useState(!1),[y]=l.useForm(),{showSuccess:f,showError:V}=T();n.useEffect(()=>{d(W),v(!1);const s=h.filter(t=>t.status==="active");s.length>0&&x(s[0].id)},[]);const E=h.filter(s=>s.status==="active"),P=j.filter(s=>s.facultyId===r),R=[{title:"Course",key:"course",render:(s,t)=>{const a=I.find(u=>u.id===t.courseId);return a?e.jsxs("div",{children:[e.jsx(c,{strong:!0,children:a.name}),e.jsx("br",{}),e.jsx(c,{type:"secondary",style:{fontSize:12},children:a.code})]}):"-"}},{title:"Branch",key:"branch",width:120,render:(s,t)=>{const a=F.find(u=>u.id===t.branchId);return a?e.jsx(b,{children:a.code}):"-"}},{title:"Semester",dataIndex:"semester",key:"semester",width:100,render:s=>`Sem ${s}`},{title:"Academic Year",dataIndex:"academicYear",key:"academicYear",width:120},{title:"Action",key:"action",width:80,render:(s,t)=>e.jsx(U,{title:"Remove this assignment?",onConfirm:()=>k(t.id),children:e.jsx(C,{type:"text",danger:!0,icon:e.jsx(O,{}),size:"small"})})}],k=s=>{d(t=>t.filter(a=>a.id!==s)),f("Assignment removed")},z=async s=>{const t={id:Date.now(),facultyId:r,...s};d(a=>[...a,t]),m(!1),y.resetFields(),f("Course assigned successfully")};return w?e.jsx("div",{className:"crud-page",style:{textAlign:"center",padding:100},children:e.jsx($,{size:"large"})}):e.jsxs("div",{className:"crud-page",children:[e.jsx(G,{title:"Faculty-Course Mapping",subtitle:"Assign courses to faculty members for academic sessions",showAdd:!1,showRefresh:!1}),e.jsxs(p,{gutter:24,children:[e.jsx(i,{xs:24,md:8,children:e.jsx(A,{title:"Faculty",size:"small",children:e.jsx(S,{dataSource:E,renderItem:s=>e.jsxs(S.Item,{className:`mapping-item ${r===s.id?"selected":""}`,onClick:()=>x(s.id),children:[e.jsxs(Y,{children:[e.jsx(q,{size:36,style:{backgroundColor:L.primary},children:B(s.name)}),e.jsxs("div",{children:[e.jsx(c,{strong:!0,children:s.name}),e.jsx("br",{}),e.jsx(c,{type:"secondary",style:{fontSize:12},children:s.department})]})]}),e.jsxs(b,{color:"purple",children:[j.filter(t=>t.facultyId===s.id).length," courses"]})]})})})}),e.jsx(i,{xs:24,md:16,children:e.jsx(A,{title:e.jsxs("span",{children:["Assigned Courses",r&&e.jsxs(c,{type:"secondary",style:{fontWeight:"normal",marginLeft:8},children:["for ",(g=h.find(s=>s.id===r))==null?void 0:g.name]})]}),extra:e.jsx(C,{type:"primary",icon:e.jsx(D,{}),onClick:()=>m(!0),disabled:!r,children:"Assign Course"}),size:"small",children:r?e.jsx(Q,{dataSource:P,columns:R,rowKey:"id",pagination:!1,size:"small",locale:{emptyText:"No courses assigned to this faculty"}}):e.jsx(_,{description:"Select a faculty member to view assignments"})})})]}),e.jsxs(J,{title:"Assign Course to Faculty",open:M,onClose:()=>m(!1),onSubmit:z,form:y,width:600,children:[e.jsxs(p,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(l.Item,{name:"courseId",label:"Course",rules:[{required:!0,message:"Please select a course"}],children:e.jsx(o,{placeholder:"Select course",options:I.map(s=>({value:s.id,label:`${s.name} (${s.code})`})),showSearch:!0,optionFilterProp:"label"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{name:"branchId",label:"Branch",rules:[{required:!0,message:"Please select branch"}],children:e.jsx(o,{placeholder:"Select branch",options:F.map(s=>({value:s.id,label:`${s.name} (${s.code})`}))})})})]}),e.jsxs(p,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(l.Item,{name:"semester",label:"Semester",rules:[{required:!0,message:"Please select semester"}],children:e.jsx(o,{placeholder:"Select semester",options:H})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{name:"academicYear",label:"Academic Year",rules:[{required:!0,message:"Please select year"}],children:e.jsx(o,{placeholder:"Select academic year",options:K})})})]})]})]})};export{de as default};
